<!-- KOMPLET FUNGERENDE VERSION - Kopier ALT til WordPress Custom HTML -->

<div style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  
  <h1 style="font-size: 2em; margin-bottom: 10px; color: #333;">Velegnethed og Identitet</h1>
  <p style="color: #666; margin-bottom: 30px;"><strong>Kategori:</strong> Identitet | <strong>Varighed:</strong> 15 minutter</p>

  <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
    <h3 style="margin-top: 0; color: #007AFF;">Intro:</h3>
    <p>Denne session hj√¶lper dig med at reflektere over din velegnethed og identitet.</p>
  </div>

  <div style="background: white; padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 30px; line-height: 1.8;">
    <p>Velkommen til denne refleksionssession. Find et stille sted hvor du kan v√¶re uforstyrret i cirka 15 minutter.</p>
    <p>Lad os starte med at tr√¶kke vejret dybt... Tag 3 dybe vejrtagninger.</p>
    <p>Nu vil vi reflektere over f√∏lgende sp√∏rgsm√•l:</p>
    <ol>
      <li>Hvad betyder det for dig at v√¶re velegnet?</li>
      <li>Hvilke v√¶rdier er vigtige for dig i din professionelle rolle?</li>
      <li>Hvordan balancerer du dit personlige og professionelle jeg?</li>
    </ol>
    <p>Tag dig tid til at t√¶nke over hvert sp√∏rgsm√•l. Der er ingen rigtige eller forkerte svar.</p>
  </div>

  <div style="background: #fafafa; padding: 30px; border-radius: 8px;">
    <h3 style="margin-top: 0;">Refleksionssp√∏rgsm√•l:</h3>
    
    <div style="margin-bottom: 25px;">
      <label style="display: block; font-weight: 600; margin-bottom: 10px;">Hvordan f√∏ler du efter denne session?</label>
      <div id="q1">
        <div class="option-btn" data-group="q1" data-value="Meget positivt" onclick="selectAnswer(this)">Meget positivt</div>
        <div class="option-btn" data-group="q1" data-value="Positivt" onclick="selectAnswer(this)">Positivt</div>
        <div class="option-btn" data-group="q1" data-value="Neutralt" onclick="selectAnswer(this)">Neutralt</div>
        <div class="option-btn" data-group="q1" data-value="Lidt negativt" onclick="selectAnswer(this)">Lidt negativt</div>
        <div class="option-btn" data-group="q1" data-value="Negativt" onclick="selectAnswer(this)">Negativt</div>
      </div>
    </div>

    <div style="margin-bottom: 25px;">
      <label style="display: block; font-weight: 600; margin-bottom: 10px;">Var indholdet relevant for dig?</label>
      <div id="q2">
        <div class="option-btn" data-group="q2" data-value="Meget relevant" onclick="selectAnswer(this)">Meget relevant</div>
        <div class="option-btn" data-group="q2" data-value="Relevant" onclick="selectAnswer(this)">Relevant</div>
        <div class="option-btn" data-group="q2" data-value="Neutralt" onclick="selectAnswer(this)">Neutralt</div>
        <div class="option-btn" data-group="q2" data-value="Lidt irrelevant" onclick="selectAnswer(this)">Lidt irrelevant</div>
        <div class="option-btn" data-group="q2" data-value="Irrelevant" onclick="selectAnswer(this)">Irrelevant</div>
      </div>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; font-weight: 600; margin-bottom: 10px;">Skriv dine personlige refleksioner (valgfrit):</label>
      <textarea id="reflection-text" rows="5" placeholder="Hvad bem√¶rkede du under denne session? Hvilke tanker kom op?"></textarea>
    </div>

    <button id="save-btn" onclick="saveReflection()">üíæ Gem Refleksion</button>
    <div id="save-feedback"></div>
  </div>
</div>

<style>
.option-btn {
  display: block;
  width: 100%;
  padding: 15px 20px;
  margin: 8px 0;
  background: white;
  color: #333;
  border: 2px solid #ddd;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  font-size: 16px;
  font-weight: 500;
  box-sizing: border-box;
  transition: all 0.2s;
}

.option-btn:hover {
  border-color: #007AFF;
  background: #f0f8ff;
}

.option-btn.selected {
  background: #007AFF;
  color: white;
  border-color: #007AFF;
}

#reflection-text {
  width: 100%;
  padding: 12px;
  border: 2px solid #ddd;
  border-radius: 8px;
  font-family: inherit;
  font-size: 16px;
  box-sizing: border-box;
  resize: vertical;
}

#save-btn {
  width: 100%;
  padding: 16px;
  background: #28a745;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

#save-btn:hover {
  background: #218838;
}

#save-feedback {
  margin-top: 15px;
  padding: 12px;
  border-radius: 6px;
  text-align: center;
  font-weight: 600;
  display: none;
}

#save-feedback.success {
  background: #d4edda;
  color: #155724;
  border: 2px solid #c3e6cb;
  display: block;
}

#save-feedback.error {
  background: #f8d7da;
  color: #721c24;
  border: 2px solid #f5c6cb;
  display: block;
}
</style>

<script>
var answers = {};

function selectAnswer(element) {
  var group = element.getAttribute('data-group');
  var value = element.getAttribute('data-value');
  
  // Fjern selected fra alle i samme gruppe
  var allInGroup = document.querySelectorAll('[data-group="' + group + '"]');
  allInGroup.forEach(function(btn) {
    btn.classList.remove('selected');
  });
  
  // Tilf√∏j selected til denne
  element.classList.add('selected');
  
  // Gem svaret
  answers[group] = value;
  
  console.log('Svar gemt:', group, '=', value);
}

function saveReflection() {
  var reflectionText = document.getElementById('reflection-text').value;
  var feedback = document.getElementById('save-feedback');
  
  // Opret reflection objekt
  var reflection = {
    id: 'session-1-' + Date.now(),
    sessionId: 'session-1-velegnethed',
    text: JSON.stringify({
      sessionTitle: 'Velegnethed og Identitet',
      q1: answers.q1 || 'Ikke besvaret',
      q2: answers.q2 || 'Ikke besvaret',
      reflection: reflectionText
    }),
    createdAt: new Date().toISOString()
  };
  
  console.log('Gemmer reflection:', reflection);
  
  // Send til app via WebView bridge
  if (window.ReactNativeWebView) {
    try {
      window.ReactNativeWebView.postMessage(JSON.stringify({
        type: 'SAVE_REFLECTION',
        payload: reflection
      }));
      
      feedback.className = 'success';
      feedback.textContent = '‚úÖ Refleksion gemt i app!';
      
      setTimeout(function() {
        feedback.style.display = 'none';
      }, 3000);
    } catch (e) {
      console.error('Fejl ved gem:', e);
      feedback.className = 'error';
      feedback.textContent = '‚ùå Fejl ved gemning: ' + e.message;
    }
  } else {
    // Test uden app
    feedback.className = 'success';
    feedback.textContent = '‚úÖ Refleksion gemt! (kun i app)';
    console.log('Ikke i app - reflection:', reflection);
    
    setTimeout(function() {
      feedback.style.display = 'none';
    }, 3000);
  }
}
</script>
